##项目愿景

问药！人的一生中总免不了遭受病痛的折磨，药也因此跟我们结下了不解之缘。可看病难，吃药更难。良药苦口是古训，不敢称之为难了。一难难在药价高，越来越高，看个感冒花几百块药钱已经是司空见惯了。二难难在种类多，医生大笔一挥，一张处方下来给你弄个4,5种药，连药理效用都搞不清楚，更不用说这药的底细了。三难难在用法杂，过不过敏，外敷内服，一日几次，一次多少，饭前饭后，水送酒送。。。

### 自由的技术

勤快人靠笔记，懒人靠科技。在那一刹那，我决定做个应用，帮饱受病痛折磨的人们减轻一点痛苦。初步愿景如下：

  1.  拿到药，用手机对着条码一拍，马上能得到该药品的所有详细信息。
  1. 针对每种药品制定用药计划（药品信息里应该有建议，接受或简单修改就行），自动设定系统时钟，到用药时间提醒病人用药。
  1. 记录每次处方的用药时间，开处方的医院，医生，金额
  1. 跟踪个人的用药史
  1. 药品排行，药品比价，药品评论
  1. 医生排行...医生排行...医生排行

###伟大的墙

所有这些想法都建立在一个很简单的假设上：药品有统一的条码，并且是可以自由获取的公共资源。这个良好的愿望能不能变成现实，还要看看会不会撞上伟大的墙！

侦察工作开始了。。。

>**for 那些猴急的人**  
初步结论：假设成立，最起码在我昨天捧回家的那一大堆药上，都有条码。有的还有两种条码咧！而且，真的是可以自由获取的公共资源哦。

经过百度（艾玛），我认为这些条码应该叫**药品本位码**<sup>[2]</sup>，可以通过国家食品药品监管局的网站上进行[数据查询][1]，有“国产药品”和“进口药品”两个数据库。

国产药品数据库包括的主要信息为：**批准文号**、药品本位码、药品本位码备注、产品名称、英文名称、商品名、生产单位、规格、剂型、产品类别、批准日期、原批准文号等。

进口药品数据库包括的主要信息为：**注册证号**、原注册证号、药品本位码、药品本位码备注、产品名称（中文）、产品名称（英文）、商品名（中文）、商品名（英文）、公司名称（中文）、公司名称（英文）、剂型（中文）、规格（中文）、注册证号备注、包装规格（中文）、生产厂商（中文）、生产厂商（英文）、厂商地址（中文）、厂商地址（英文）、厂商国家（中文）、厂商国家（英文）、分包装批准文号、发证日期、有效期截止日、分包装企业名称、分包装企业地址、分包装文号批准日期、分包装文号有效期截止日、产品类别、药品本位码、药品本位码备注、地址（中文）、地址（英文）、国家（中文）、国家（英文）。

我兴冲冲地拿着盒子一查，发现不对。所以我再次百度（艾玛），觉得这些条码应该叫**药品电子监管码**<sup>[3]</sup>，拿着药盒一验证，果然！就是监管码，而且最令人惊喜的是，我昨天开的5种药里，居然有两种药品上都贴了监管码，命中率40%！！！


哦，监管码为20位的数字字串，编码规则如下：

 1. 第1位，药品编码为8
 2. 第2位，区分监管码的级别，一级码，二级码还是三级码
 3. 第3-7位，资源码，代表产品的生产厂家，药品名称，规格，包装规则等
 4. 第8-16，单件系列号
 5. 第17-20位，为加密码

所以，可以开始干了

<sub>[2] 药品本位码属于**国家药品编码**的一种。药品本位码用于国家药品注册信息管理，药品首次注册登记时赋予本位码，是国家批准注册药品唯一的身份标识；国家药品编码包括**本位码**、**监管码**和**分类码**。本位码由药品国别码、药品类别码、药品本体码、校验码依次连接而成。</sub>

<sub>[3] 国家药监局为建立药品全品种的安全追溯体系，强化药品质量安全监管，确保公众用药安全。决定，凡生产**基本药物品种**的中标企业，应在2011年3月31日前加入**药品电子监管网**（www1.drugadmin.com），基本药物品种出厂前，生产企业须按规定在上市产品**最小销售包装**上加印（贴）统一标识的**药品电子监管码**，并通过监管网进行数据采集和报送。</sub>

##项目范围

目标明确了，确定解决方案。

我们关心的主要域对象有：

 1. 药品：基本资源，主要用于查询，可参照监管局分成国产药和进口药两种
 1. 处方：用户自行创建的处方记录，插入频繁，定期统计；应该包括(药品，药量，药单价)列表，医生或医院，处方时间
 1. 用药计划，或者叫疗程：由处方衍生出的事件集，主要包括时间点，药品，用法，用量
 1. 用户（痛苦悲催的）：你懂的
 1. 医生（压力山大的）：可有可无吧，患者何苦为难医生。
 1. 医院：有钱淫
 1. 药店：要不要呢？先放上吧，毕竟也有推荐的行为

至于功能实现，首先要有个网站，然后要有各种手机App。wenyao.com被占了，所以网站就叫**i问药**吧。各种手机App，就叫问药吧。

###iWenyao.com

这个网站存在的主要作用是为mobile 提供服务，但因为还担负着演示play框架的重任，所以页面还是需要做几个的，暂定如下：

1. 首页是药态，近期的排行榜（按用量或金额），或排名靠前药品的折线图。
1. 个人主页，当前用药计划，可以按列表和日历两种视图展示
1. 用药历史，你曾经吃过的那些药

关键组件：

1. 药品查询，用监管码，同时提供页面查询方式和http服务查询方式（json）
1. 小闹钟，定期触发事件，事件监听者以各种方式发送通知

先这么多吧，药店地图之类的做不做以后再说。

###问药

此处略去2000字。。。